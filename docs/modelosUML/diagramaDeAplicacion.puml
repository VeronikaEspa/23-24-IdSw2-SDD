@startuml DiagramaDeAplicacion

class App {
    - WorldController worldController

    + main()
    - initializeGame()
    - runGameCycle()
}

package "Model" {
    class World {
        - Map map
        - List<Entity> entities
        - Time time

        + simulateCycle()
        + addEntity(Entity newEntity)
        + getMap()
        + getEntities() : List<Entity>
        + getTime() : Time
        + setTime(Time time)
    }

    class Time {
        - TimesOfDay timeOfDay
        - int currentTime

        + advanceTime()
        + setTimeOfDay(int currentTime)
        + resetDay()
        + getCurrentTime() : int
        + getTimeOfDay() : TimesOfDay
    }

    class Map {
        - Tile[][] tiles

        + updateTile(Point point, Tile newTile)
        + getTile(Point point) : Tile
        + getHeight() : int
        + getWidth() : int
    }

    class Tile {
        - TileTypes type

        + changeType(TileTypes newType)
        + getType() : TileTypes
        + getAsciiSymbol() : String
        + getAsciiColor() : String
    }

    abstract class Entity {
        - Point position
        - Transport transportInUse

        + moveTo(Point newPosition)
        + changeTransport(Transport newTransport)
        + getTransportInUse() : Transport
    }

    class Character extends Entity {
        - CharacterType type
        - Transport[] availableTransports

        + getAvailableTransports() : Transport[]
        + getCharacterType() : CharacterType
    }

    class Transport {
        - TransportTypes type

        + getType() : TransportTypes
        + getSpeed() : int
        + getAsciiSymbol() : String
    }

    class Point {
        - int x
        - int y

        + getLocation() : int[]
        + setLocation(int x, int y)
    }

    enum TileTypes {
        Floor
        Sand
        Wall
        ShortGrass
        MediumGrass
        TallGrass
        Water
        DeepWater
        Mountain
    }

    enum ImpreciseTime {
        Morning
        Afternoon
        Evening
        Night
    }

    enum TransportTypes {
        Foot
        Horse
        Boat
        MagicCarpet
    }

    enum CharacterType {
        Playable, NonPlayable
        - String asciiColor
        + CharacterType(String asciiColor)
        + getAsciiColor()
    }
}

package "View" {
    class WorldView {
        + displayWorld(World world)
        + displayTime(Time time)
        + displayIntoConsole(Map map, List<Entity> entities)
        - displayMap(Map map, List<Entity> entities) : String[][]
    }
}

package "Controller" {
    class WorldController {
        - World world
        - WorldView worldView

        + initializeGame()
        + runGameCycle()
        - initializeWorldMap()
        - initializeWorldEntities()
        - createPlayer()
        - createNPC()
        - createCharacter(Transport[] transports, CharacterType type)
        - readFileContent(Path path, int count) : List<String[]>
        - populateMap(List<String[]> mapData, Map worldMap)
        - createTileByNumber(String tileNumber) : Tile
        - getRandomCharacterMovement() : char
        - getUserInput() : char
        - moveCharacters(Scanner scanner)
        - getNewPosition(Point currentPosition, char direction) : Point
        - isValidPosition(Point position) : boolean
        - updateTransportInUse()
    }
}

World --> Map
World --> Entity
World --> Time
Map --> Tile
Tile --> TileTypes
Entity --> Point
Entity --> Transport
Transport --> TransportTypes
Time --> ImpreciseTime
Character --> CharacterType
WorldController --> World
WorldController --> WorldView
App --> WorldController
@enduml
